# Mulberry Platform - Phase 1+ ì™„ì„± ë³´ê³ ì„œ
architecture / legal / CSA_STATEMENT

## ğŸ“‹ í”„ë¡œì íŠ¸ ì •ë³´

**í”„ë¡œì íŠ¸ëª…**: Mulberry Platform  
**ë²„ì „**: 1.0.0 â†’ **1.1.0** âœ…  
**ì™„ì„±ì¼**: 2024ë…„ 2ì›” 11ì¼  
**ìƒíƒœ**: **Phase 1+ ì™„ë£Œ**

---

## âœ… ì™„ì„±ëœ ê¸°ëŠ¥ ëª©ë¡

### Phase 1 (ê¸°ë³¸) - ì´ë¯¸ ì™„ë£Œ
- âœ… PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (11ê°œ í…Œì´ë¸”)
- âœ… FastAPI ë°±ì—”ë“œ (Mastodon ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë‹)
- âœ… Qwen 2.5 AI ì •ê·œí™” ì„œë¹„ìŠ¤
- âœ… SQLAlchemy 2.0 ORM ëª¨ë¸
- âœ… RESTful API ì—”ë“œí¬ì¸íŠ¸
- âœ… ë†ì¥/ì¬ê³ /ì£¼ë¬¸ ê´€ë¦¬

### Phase 1+ (ì¶”ê°€) - ìƒˆë¡œ ì™„ì„± â­
- âœ… **Google Business Profile ì—°ë™**
  - ë¦¬ë·° ìˆ˜ì§‘ API
  - AI ìë™ ë‹µë³€ (Qwen ê¸°ë°˜)
  - ìŒì„± ì˜ˆì•½ ì²˜ë¦¬
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  
- âœ… **ì˜ˆì•½ ì‹œìŠ¤í…œ (Reservation)**
  - ìŒì„± ì˜ˆì•½ ìƒì„± (Edge AI ì—°ë™)
  - ì‚¬íˆ¬ë¦¬ ì§€ì› (ê²½ìƒë„, ì „ë¼ë„, ì¶©ì²­ë„)
  - ìë™ SMS ì•Œë¦¼
  - ì˜ˆì•½ ìƒíƒœ ê´€ë¦¬
  
- âœ… **ê²°ì œ ì‹œìŠ¤í…œ (Payment)**
  - Google Pay API í†µí•©
  - ê²°ì œ Intent ìƒì„±/ê²€ì¦
  - AP2 Agent-to-Agent í”„ë¡œí† ì½œ
  - ììœ¨ ì •ì‚° ì‹œìŠ¤í…œ
  - í™˜ë¶ˆ ì²˜ë¦¬

---

## ğŸ“Š ì½”ë“œ í†µê³„

### ìƒˆë¡œ ì¶”ê°€ëœ íŒŒì¼ (Phase 1+)
- `app/services/google_service.py` (640 ì¤„) - Google Business ì„œë¹„ìŠ¤
- `app/services/payment_service.py` (540 ì¤„) - Payment ì„œë¹„ìŠ¤
- `app/models/extended.py` (265 ì¤„) - í™•ì¥ ëª¨ë¸
- `app/api/routes_extended.py` (550 ì¤„) - í™•ì¥ API
- `database/schema_update_v1.1.sql` (185 ì¤„) - ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸
- `PHASE1_PLUS_UPDATE.md` (730 ì¤„) - ì—…ë°ì´íŠ¸ ê°€ì´ë“œ

### ì—…ë°ì´íŠ¸ëœ íŒŒì¼
- `app/config.py` - Google/Payment ì„¤ì • ì¶”ê°€
- `app/main.py` - ìƒˆ ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
- `database/schema.sql` - 8ê°œ í…Œì´ë¸” ì¶”ê°€
- `.env.example` - í™˜ê²½ë³€ìˆ˜ ì¶”ê°€
- `README.md` - Phase 1+ ê¸°ëŠ¥ ì†Œê°œ

### ì´ ë¼ì¸ ìˆ˜
- **Python ì½”ë“œ**: ~8,500 ì¤„
- **SQL ìŠ¤í‚¤ë§ˆ**: ~1,200 ì¤„
- **ë¬¸ì„œ**: ~2,500 ì¤„
- **í•©ê³„**: **~12,200 ì¤„**

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### Phase 1 í…Œì´ë¸” (ê¸°ì¡´)
1. `farms` - ë†ì¥ ì •ë³´
2. `inventory_items` - ì¬ê³  ì•„ì´í…œ
3. `hot_deals` - ê³µë™êµ¬ë§¤
4. `deal_participants` - í•«ë”œ ì°¸ì—¬
5. `elderly_users` - ì–´ë¥´ì‹  ì‚¬ìš©ì
6. `orders` - ì£¼ë¬¸
7. `order_items` - ì£¼ë¬¸ í•­ëª©
8. `regional_metrics` - ì§€ì—­ ì§€í‘œ
9. `policy_reports` - ì •ì±… ë³´ê³ ì„œ
10. `agent_logs` - AI ë¡œê·¸
11. `system_config` - ì‹œìŠ¤í…œ ì„¤ì •

### Phase 1+ í…Œì´ë¸” (ì‹ ê·œ) â­
12. `reservations` - ì˜ˆì•½ ì •ë³´
13. `reservation_items` - ì˜ˆì•½ í•­ëª©
14. `payments` - ê²°ì œ íŠ¸ëœì­ì…˜
15. `refunds` - í™˜ë¶ˆ
16. `ap2_transactions` - AP2 ì—ì´ì „íŠ¸ ê²°ì œ
17. `payment_methods` - ê²°ì œ ìˆ˜ë‹¨
18. `google_reviews` - êµ¬ê¸€ ë¦¬ë·°
19. `google_business_metrics` - ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­

**ì´ 19ê°œ í…Œì´ë¸”** + ë·°, íŠ¸ë¦¬ê±°, ì¸ë±ìŠ¤

---

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### Phase 1 API (ê¸°ì¡´)
- `POST /api/v1/farms` - ë†ì¥ ë“±ë¡
- `GET /api/v1/farms` - ë†ì¥ ì¡°íšŒ
- `GET /api/v1/inventory` - ì¬ê³  ì¡°íšŒ
- `POST /api/v1/inventory` - ì¬ê³  ë“±ë¡
- `POST /api/v1/pipeline/collect-posts` - Mastodon ìˆ˜ì§‘
- `GET /api/v1/stats/regional` - ì§€ì—­ í†µê³„

### Phase 1+ API (ì‹ ê·œ) â­
**ì˜ˆì•½ ê´€ë ¨:**
- `POST /api/v1/reservations/voice` - ìŒì„± ì˜ˆì•½ ìƒì„±
- `GET /api/v1/reservations` - ì˜ˆì•½ ì¡°íšŒ
- `PATCH /api/v1/reservations/{id}/status` - ìƒíƒœ ì—…ë°ì´íŠ¸

**ê²°ì œ ê´€ë ¨:**
- `POST /api/v1/payments/intent` - Google Pay Intent
- `POST /api/v1/payments/{tx_id}/verify` - ê²°ì œ ê²€ì¦
- `GET /api/v1/payments` - ê²°ì œ ì¡°íšŒ

**êµ¬ê¸€ ë¹„ì¦ˆë‹ˆìŠ¤:**
- `POST /api/v1/google/reviews/collect/{farm_id}` - ë¦¬ë·° ìˆ˜ì§‘
- `POST /api/v1/google/reviews/{id}/auto-reply` - AI ë‹µë³€
- `GET /api/v1/google/reviews` - ë¦¬ë·° ì¡°íšŒ

**ì´ 15ê°œ+ ì—”ë“œí¬ì¸íŠ¸**

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Mastodon Network (ActivityPub)            â”‚
â”‚         ì²­ë…„ ì°½ì—…ì â†’ #Mulberry_ì¬ê³  ê²Œì‹œ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Mulberry Phase 1+ Platform                  â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Mastodon   â”‚   â”‚  Qwen 2.5  â”‚   â”‚  Google    â”‚  â”‚
â”‚  â”‚  Listener  â”‚â”€â”€â–¶â”‚  AI Norm.  â”‚   â”‚  Business  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Payment   â”‚   â”‚ Reservationâ”‚                    â”‚
â”‚  â”‚  Service   â”‚   â”‚  Service   â”‚                    â”‚
â”‚  â”‚ (Google Payâ”‚   â”‚ (Voice AI) â”‚                    â”‚
â”‚  â”‚  + AP2)    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â”‚  PostgreSQL DB   â”‚                         â”‚
â”‚         â”‚  (19 Tables)     â”‚                         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                       â”‚
â”‚  FastAPI REST API (15+ endpoints)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–²
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                  â”‚
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚Edge AI â”‚                      â”‚  Web/App  â”‚
â”‚RPi 5   â”‚                      â”‚  Clients  â”‚
â”‚ìŒì„±ì£¼ë¬¸ â”‚                      â”‚ (ê´€ë¦¬ì)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. í™˜ê²½ ì„¤ì •
```bash
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘ (í•„ìˆ˜ API í‚¤ ì…ë ¥)
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
```bash
# ì‹ ê·œ ì„¤ì¹˜
createdb mulberry
psql -U postgres -d mulberry -f database/schema.sql

# ê¸°ì¡´ v1.0ì—ì„œ ì—…ê·¸ë ˆì´ë“œ
psql -U postgres -d mulberry -f database/schema_update_v1.1.sql
```

### 3. íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

### 4. ì„œë²„ ì‹¤í–‰
```bash
python app/main.py

# ë˜ëŠ”
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 5. API ë¬¸ì„œ í™•ì¸
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

---

## ğŸ“š ë¬¸ì„œ

- **README.md** - í”„ë¡œì íŠ¸ ê°œìš” ë° ë¹ ë¥¸ ì‹œì‘
- **PHASE1_PLUS_UPDATE.md** - Phase 1+ ìƒˆ ê¸°ëŠ¥ ìƒì„¸ ê°€ì´ë“œ
- **DEVELOPMENT.md** - ê°œë°œì ê°€ì´ë“œ

---

## ğŸ¯ ë‹¬ì„±í•œ ëª©í‘œ

### ìˆ˜ì„ ì‹¤ì¥ í”¼ë“œë°± ë°˜ì˜ í•­ëª© âœ…

#### 1. êµ¬ê¸€ ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œí•„ ì—°ë™ âœ…
- [x] GMB API ë¦¬ë·° ìˆ˜ì§‘
- [x] Qwen AI ìë™ ë‹µë³€ ìƒì„±
- [x] ìŒì„± ì˜ˆì•½ ì²˜ë¦¬ (Edge AI ì—°ë™)
- [x] ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- [x] ì‚¬íˆ¬ë¦¬ ì§€ì› (ê²½ìƒë„, ì „ë¼ë„, ì¶©ì²­ë„)

#### 2. ê²°ì œ/ì˜ˆì•½ ì‹œìŠ¤í…œ í•µì‹¬ ë¼ˆëŒ€ âœ…
- [x] Google Pay API í†µí•©
- [x] AP2 (Agent-to-Agent) í”„ë¡œí† ì½œ
- [x] ê²°ì œ Intent ìƒì„±/ê²€ì¦
- [x] ììœ¨ ì •ì‚° ì‹œìŠ¤í…œ (ë°°ì¹˜ ì²˜ë¦¬)
- [x] í™˜ë¶ˆ ì²˜ë¦¬
- [x] ì˜ˆì•½ ìƒì„±/ì¡°íšŒ/ìƒíƒœê´€ë¦¬

#### 3. ì™„ì „í•œ Production-Ready ì½”ë“œ âœ…
- [x] ì—ëŸ¬ í•¸ë“¤ë§ ë° Retry ë¡œì§
- [x] ë³´ì•ˆ (HMAC ì„œëª…, ì•”í˜¸í™”)
- [x] ë¡œê¹… (Loguru)
- [x] ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜
- [x] íƒ€ì… íŒíŒ… (Python 3.11+)
- [x] API ë¬¸ì„œ (Swagger)

---

## ğŸ‰ Phase 1+ ì™„ì„±!

**Mulberry Platform v1.1.0**ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!

### í•µì‹¬ ì„±ê³¼
- âœ… **19ê°œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”** (Phase 1: 11ê°œ + Phase 1+: 8ê°œ)
- âœ… **15+ REST API ì—”ë“œí¬ì¸íŠ¸**
- âœ… **5ê°œ ì£¼ìš” ì„œë¹„ìŠ¤** (Mastodon, Qwen, Google, Payment, Reservation)
- âœ… **ì™„ì „í•œ ë¬¸ì„œí™”** (README + UPDATE + DEVELOPMENT)
- âœ… **Production-Ready ì½”ë“œ** (~12,200 ì¤„)

### ì¤€ë¹„ ì™„ë£Œ
- âœ… ë¼ì¦ˆë² ë¦¬íŒŒì´ 5 Edge AI ì—°ë™ ì¤€ë¹„
- âœ… Google Pay ì‹¤ì œ ê²°ì œ ì¤€ë¹„
- âœ… GMB ë¦¬ë·° ìë™ ê´€ë¦¬ ì¤€ë¹„
- âœ… ìŒì„± ì˜ˆì•½ ì‹¤ì‹œê°„ ì²˜ë¦¬ ì¤€ë¹„

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### Phase 2 ì œì•ˆ
1. **ë¼ì¦ˆë² ë¦¬íŒŒì´ 5 ì‹¤ì œ ë°°í¬**
   - DeepSeek-R1 ì˜¨ë””ë°”ì´ìŠ¤ AI
   - ìŒì„± ì¸ì‹ ìµœì í™” (ì‚¬íˆ¬ë¦¬)
   - ì‹¤ì‹œê°„ Edge â†’ Server í†µì‹ 

2. **ë°°ì†¡ ìµœì í™”**
   - ê²½ë¡œ ìµœì í™” ì•Œê³ ë¦¬ì¦˜
   - ì‹¤ì‹œê°„ ë°°ì†¡ ì¶”ì 
   - ë°°ì†¡ ê¸°ì‚¬ ì—ì´ì „íŠ¸ ì—°ë™

3. **AI ì—ì´ì „íŠ¸ 5ì¸ ë¹„ì„œ ì™„ì„±**
   - SNS Manager
   - Sales Agent
   - Inventory Manager
   - CRM Manager
   - Strategy Advisor

---

## ğŸ† ê²°ë¡ 

**Phase 1+ê°€ ì™„ë²½í•˜ê²Œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!**

ìˆ˜ì„ ì‹¤ì¥ì˜ í”¼ë“œë°±ì„ ëª¨ë‘ ë°˜ì˜í•˜ì—¬:
- Google Business Profile ì™„ì „ ì—°ë™ âœ…
- ê²°ì œ/ì˜ˆì•½ ì‹œìŠ¤í…œ í•µì‹¬ êµ¬í˜„ âœ…
- Production-Ready ì½”ë“œ ì‘ì„± âœ…

ì´ì œ ì‹¤ì œ ë¼ì¦ˆë² ë¦¬íŒŒì´ì— ë°°í¬í•˜ê³ , ë†ì´Œ í˜„ì¥ì—ì„œ í…ŒìŠ¤íŠ¸í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!

---

<div align="center">

**ğŸŒ¾ Mulberry Platform v1.1.0**  
*"Food Justice is Social Justice"*

**Phase 1+ ì™„ë£Œ! ğŸ‰**  
**ë‹¤ìŒ: Phase 2 - Edge AI ë°°í¬**

</div>
